<!-- WalletFuel Lincx Template -->
<div class="lincx-wrapper">
  <div class="lincx-container">
    
    {{#ads}}
    <article class="listicle" id="{{ adId }}" data-heading="{{ listical_headline }}" data-group="{{ groupOffer }}">
      
      <!-- Logo (hidden for numbered items) -->
      <div class="logo" data-content="{{ logoUrl }}">
        <img src="{{ logoUrl }}" alt="Logo" loading="lazy" />
      </div>
      
      <!-- Section Header (for intro/category cards) -->
      <header class="listicle__header" data-content="{{ listical_headline }}">
        <h1 class="heading">{{{ listical_headline }}}</h1>
        <p class="listicle__subheadline" data-content="{{ listicle_subheadline }}">{{{ listicle_subheadline }}}</p>
      </header>
      
      <!-- Author Info -->
      <div class="listicle__info" data-content="{{ author_name }}">
        <img class="listicle__author--image" src="{{ src_author }}" alt="{{ author_name }}" data-content="{{ src_author }}" />
        <span class="listicle__author--name">By {{ author_name }}</span>
        <span class="listicle__date" id="publish-date"></span>
      </div>
      
      <!-- Numbered Subheading (for listicle items) -->
      <h2 class="subheading" data-content="{{ offer_headline }}">
        <span class="subheading__text">{{{ offer_headline }}}</span>
      </h2>
      
      <!-- Thumbnail Image -->
      <div class="listicle__thumbnail lazy-load" data-content="{{ src }}">
        <img data-src="{{ src }}" alt="{{ name }}" />
      </div>
      
      <!-- Video Thumbnail -->
      <div class="listicle__thumbnail lazy-load" data-content="{{ videoSrc }}" data-show="{{ src }}">
        <video class="video-thumbnail" data-src="{{ videoSrc }}" muted playsinline loop></video>
      </div>
      
      <!-- Main Content -->
      <div class="listicle__content" data-content="{{ offer_text }}">
        {{{ offer_text }}}
      </div>
      
      <!-- Single CTA Button -->
      <a href="{{ href }}" 
         class="cta__link" 
         data-content="{{ cta_text }}"
         data-lincx-cta 
         data-lincx-cta-name="main" 
         data-lincx-cta-position="cta_link">
        {{ cta_text }}
      </a>
      
      <!-- Multiple CTA Buttons -->
      <div class="listicle__list__cta" data-show="{{ cta_text }}">
        {{#cta_list}}
        <a href="{{ href }}" 
           class="cta__link cta__link--multi" 
           data-lincx-cta 
           data-lincx-cta-name="list" 
           data-lincx-cta-position="cta_list">
          {{.}}
        </a>
        {{/cta_list}}
      </div>
      
    </article>
    {{/ads}}
    
    <!-- Footer -->
    <footer class="footer">
      <p><strong>Advertising Disclosure:</strong> This content may contain affiliate links. We may earn a commission if you click through and make a purchase.</p>
      <p>&copy; <span id="year"></span> <span id="location"></span>. All rights reserved.</p>
      <p><a href="/privacy">Privacy Policy</a> | <a href="/terms">Terms of Service</a> | <a href="/contact">Contact</a></p>
    </footer>
    
  </div>
</div>

<script>
(function() {
  'use strict';
  
  // Set current year
  const yearEl = document.getElementById('year');
  if (yearEl) yearEl.textContent = new Date().getFullYear();
  
  // Set location from hostname
  const locationEl = document.getElementById('location');
  if (locationEl) locationEl.textContent = window.location.hostname;
  
  // Set publish date
  const dateEl = document.getElementById('publish-date');
  if (dateEl) {
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    dateEl.textContent = new Date().toLocaleDateString('en-US', options);
  }
  
  // Lazy loading with IntersectionObserver
  function initLazyLoad() {
    const lazyElements = document.querySelectorAll('.lazy-load');
    
    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            const container = entry.target;
            const img = container.querySelector('img[data-src]');
            const video = container.querySelector('video[data-src]');
            
            if (img && img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
            }
            
            if (video && video.dataset.src) {
              video.src = video.dataset.src;
              video.removeAttribute('data-src');
              video.play().catch(function() {});
            }
            
            observer.unobserve(container);
          }
        });
      }, { rootMargin: '100px' });
      
      lazyElements.forEach(function(el) {
        observer.observe(el);
      });
    } else {
      // Fallback for older browsers
      lazyElements.forEach(function(container) {
        const img = container.querySelector('img[data-src]');
        const video = container.querySelector('video[data-src]');
        if (img) img.src = img.dataset.src;
        if (video) video.src = video.dataset.src;
      });
    }
  }
  
  // Parse CTA list items (supports "Label|URL" format)
  function parseCTAList() {
    const ctaLinks = document.querySelectorAll('.cta__link--multi');
    ctaLinks.forEach(function(link) {
      const text = link.textContent.trim();
      if (text.includes('|')) {
        const parts = text.split('|');
        link.textContent = parts[0].trim();
        if (parts[1]) link.href = parts[1].trim();
      }
    });
  }
  
  // Initialize
  document.addEventListener('DOMContentLoaded', function() {
    initLazyLoad();
    parseCTAList();
  });
})();
</script>